function isObject (val) {
  if (val !== null && typeof val === 'object' && val.constructor !== Array) {
    return true
  }

  return false
}

function toArray (val) {
  return (typeof val) === 'string' || (typeof val) === 'number' ? [val] : val
}

function extend (mainObj, appendObj) {
  // eslint-disable-next-line one-var
  var i, ii, key, data = {}
  for (key in mainObj) {
    if (isObject(mainObj[key]) && mainObj[key].constructor.name !== 'FormData') {
      data[key] = extend(mainObj[key], {})
    } else {
      data[key] = mainObj[key]
    }
  }

  for (i = 0, ii = appendObj.length; i < ii; i++) {
    for (key in appendObj[i]) {
      if (isObject(appendObj[i][key]) && appendObj[i][key].constructor.name !== 'FormData') {
        data[key] = extend(mainObj[key] || {}, [appendObj[i][key]])
      } else {
        data[key] = appendObj[i][key]
      }
    }
  }

  return data
}

function compare (one, two) {
  var i, ii, key

  if (Object.prototype.toString.call(one) === '[object Object]' && Object.prototype.toString.call(two) === '[object Object]') {
    for (key in one) {
      if (compare(one[key], two[key])) {
        return true
      }
    }

    return false
  }

  one = toArray(one)
  two = toArray(two)

  if (!one || !two || one.constructor !== Array || two.constructor !== Array) {
    return false
  }

  for (i = 0, ii = one.length; i < ii; i++) {
    if (two.indexOf(one[i]) >= 0) {
      return true
    }
  }

  return false
}

export default {
  extend: extend,
  toArray: toArray,
  isObject: isObject,
  compare: compare
}
